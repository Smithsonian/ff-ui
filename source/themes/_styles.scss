/**
 * FF Typescript Foundation Library
 * Copyright 2018 Ralph Wiedemeier, Frame Factory GmbH
 *
 * License: MIT
 */

////////////////////////////////////////////////////////////////////////////////
// FONTS

$font-ui: "Segoe UI", "HelveticaNeue", "Helvetica Neue", Helvetica, Arial, sans-serif;

@mixin font-ui-normal {
  font-family: $font-ui;
  font-weight: 400;
}

@mixin font-ui-bold {
  font-family: $font-ui;
  font-weight: 700;
}

////////////////////////////////////////////////////////////////////////////////
// COLORS

$color-background: #343434 !default;
$color-background-dark: darken($color-background, 4%) !default;
$color-background-darker: darken($color-background, 10%) !default;
$color-background-light: lighten($color-background, 10%) !default;
$color-background-lighter: lighten($color-background, 20%) !default;
$color-background-hover: $color-background-lighter !default;

$color-primary: #1f6699 !default; // blue
$color-primary-light: lighten($color-primary, 8%) !default;
$color-primary-dark: darken($color-primary, 8%) !default;

$color-secondary: #E64A19 !default; // orange
$color-secondary-light: lighten($color-secondary, 15%) !default;
$color-secondary-dark: darken($color-secondary, 15%) !default;

$color-text: #c8c8c8 !default;
$color-text-disabled: #808080 !default;
$color-icon: #a0a0a0 !default;
$color-icon-disabled: #606060 !default;

$color-focus: $color-secondary-light;

////////////////////////////////////////////////////////////////////////////////
// MIXINS

// short hover animation
$tx-short: 0.15s;
// medium transition
$tx-medium: 0.3s;


@mixin full-size {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
}

@mixin full-screen {
  position: fixed;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
}

@mixin triangle($color, $size, $angle) {
  &:before {
    content: '';
    position: absolute;
    top: 0.6em;
    left: 3px;
    width: 0;
    height: 0;
    border-left: $size solid transparent;
    border-right: $size solid transparent;
    border-bottom: $size solid $color;
    transform: rotate($angle);
    transition: transform 0.05s;
  }
}

@mixin dot($color, $size: 4px, $left: 5px, $top: 0.6em) {
  &:before {
    content: '';
    position: absolute;
    top: $top;
    left: $left;
    width: $size;
    height: $size;
    border: none;
    background: $color;
  }
}

@mixin window {
  box-sizing: border-box;
  background: $color-background;
  border: 1px solid $color-background-light;
  box-shadow: 3px 3px 24px rgba(0, 0, 0, 0.4);
}

////////////////////////////////////////////////////////////////////////////////
// GLOBAL

html {
  color: $color-text;
}

button, input {
  display: block;
  padding: 0;
  margin: 0;
  border: none;
  background-color: inherit;
  color: inherit;
  font-size: inherit;
  cursor: inherit;
}

*:focus {
  outline: 1px solid $color-primary;
  outline-offset: 0;
}

////////////////////////////////////////////////////////////////////////////////
// SEMANTIC ELEMENTS

.ff-text {
  user-select: none;
  pointer-events: none;
}

////////////////////////////////////////////////////////////////////////////////
// CONTROLS

.ff-button {
  padding: 4px 3px;
  background: $color-background-light;
  transition: background-color 0.2s;
  cursor: pointer;

  &:hover {
    background-color: $color-background-lighter;
  }
  &[selected] {
    background-color: $color-primary;

    &:hover {
      background-color: $color-primary-light;
    }
  }

  .ff-text {
    padding: 4px 3px;
    white-space: nowrap;
  }
  .ff-icon {
    padding: 4px 3px;
    font-size: 1.3em;
  }
}

ff-popup-button {
  .ff-content {
    transition: opacity $tx-short;
  }
}

ff-line-edit {
  background-color: $color-background-dark;

  input {
    padding: 2px;
  }
}

ff-property-field {
  background: $color-background-dark;
  //height: 18px;
  //font-size: 14px;
  cursor: pointer;

  &:focus {
    outline: none;
  }

  .ff-bar {
    margin: 2px 0;
    background: $color-background-light;
  }
  .ff-content {
    margin: -2px 2px 0 2px;
    text-align: end;
  }
  .ff-event {

  }
  .ff-option {

  }
  input {
    padding: 0 2px;
    background-color: $color-background-darker;
    text-align: end;
  }
}

////////////////////////////////////////////////////////////////////////////////
// COMPONENTS

.ff-modal-plane {
  @include full-screen;
  background: transparentize(red, 0.6);
}

ff-dialog {
  @include window;
}

.ff-frame {
  padding: 4px;

  .ff-control {
    margin: 4px;
  }
}

ff-title-bar {
  background: $color-background-darker;
  padding: 2px;

  .ff-text {
    flex: 1 1 auto;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    padding-right: 8px;
  }
  .ff-icon {
    padding: 2px;
  }
}

ff-quad-splitter {
  .ff-left {
    box-sizing: border-box;
    border-right: 1px solid $color-background;
  }
  .ff-top {
    box-sizing: border-box;
    border-bottom: 1px solid $color-background;
  }
}

////////////////////////////////////////////////////////////////////////////////
// MENU

.ff-menu {
  @include window;
  min-width: 6rem;

  button {
    padding: 4px 8px;
    text-align: start;
    user-select: none;
  }

  button + button {
    margin-top: 1px;
  }

  button:hover {
    background-color: $color-background-light;
  }
  button:focus {
    outline: none;
    background-color: $color-primary;
  }
}

////////////////////////////////////////////////////////////////////////////////
// TREE

.ff-tree {
  .ff-tree-node-container {
    margin-left: -501px;
    border-top: 1px solid $color-background-light;
    border-bottom: 1px solid $color-background-light;
    margin-bottom: -1px;
  }

  .ff-tree-node {
    margin-left: 500px;

    &.ff-inner {
      background-color: darken($color-background, 2%);
    }
    &.ff-leaf {
      background-color: lighten($color-background, 3%);
    }
    &.ff-root {
      background-color: $color-background-dark;
    }
    &[selected] {
      background-color: $color-primary;
    }

    .ff-header {
      position: relative;
      cursor: pointer;
      padding: 0 0 2px 14px;
      display: flex;

      .ff-text {
        user-select: none;
      }
    }

    &[expanded] .ff-header {
      @include triangle($color-icon, 3px, 180deg);
    }
    &:not([expanded]) .ff-header {
      @include triangle($color-icon, 3px, 90deg);
    }
    &.ff-leaf .ff-header {
      @include dot($color-icon-disabled, 3px, 6px, 0.6em);
      cursor: default;
    }

    .ff-content {
      margin-left: 10px;
    }
    &:not([expanded]) > .ff-content {
      display: none;
    }
  }
}

////////////////////////////////////////////////////////////////////////////////
// TAB CONTAINER

ff-tab-container {
  background: $color-background;
}

ff-tab-header {

}

////////////////////////////////////////////////////////////////////////////////
// DOCK VIEW

$color-dock-frame: $color-background-darker;
$color-dock-background: $color-background-dark;

ff-tab-container, ff-dock-stack {
  background: $color-dock-background;
  border: 1px solid $color-dock-frame;

  & header {
    background: $color-dock-frame;
  }
}

ff-tab-header, ff-dock-panel-header {
  background: $color-dock-frame;
  color: $color-text;
  padding: 0 2px 2px 0;

  &[active] {
    background: linear-gradient(lighten($color-dock-background, 15%), $color-dock-background);
    color: $color-text;
  }

  label {
    pointer-events: none;
  }
  .ff-text {
    padding: 0 3px;
  }
  .ff-icon {
    font-size: 0.8rem;
    padding: 0 3px;
    color: $color-text-disabled;
  }
}

.ff-dock-drop-marker {
  box-sizing: border-box;
  background: transparentize($color-primary, 0.7);
  border: 1px solid $color-primary;
}

////////////////////////////////////////////////////////////////////////////////
// NODE GRAPH SYSTEM

@import "./graph";
